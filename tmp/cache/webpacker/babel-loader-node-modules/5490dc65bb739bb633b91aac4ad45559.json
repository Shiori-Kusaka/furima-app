{"ast":null,"code":"var card = function card() {\n  Payjp.setPublicKey(process.env.PAYJP_PUBLIC_KEY);\n  var form = document.getElementById(\"charge-form\");\n  form.addEventListener(\"submit\", function (e) {\n    e.preventDefault();\n    var formResult = document.getElementById(\"charge-form\");\n    var formData = new FormData(formResult);\n    var card = {\n      number: formData.get(\"order_address[number]\"),\n      exp_month: formData.get(\"order_address[exp_month]\"),\n      exp_year: \"20\".concat(formData.get(\"order_address[exp_year]\")),\n      cvc: formData.get(\"order_address[cvc]\")\n    };\n    Payjp.createToken(card, function (status, response) {\n      if (status == 200) {\n        var token = response.id;\n        var renderDom = document.getElementById(\"charge-form\");\n        var tokenObj = \"<input value=\".concat(token, \" name='token' type=\\\"hidden\\\"> \");\n        renderDom.insertAdjacentHTML(\"beforeend\", tokenObj);\n      }\n\n      document.getElementById(\"card-number\").removeAttribute(\"name\");\n      document.getElementById(\"card-exp-month\").removeAttribute(\"name\");\n      document.getElementById(\"card-exp-year\").removeAttribute(\"name\");\n      document.getElementById(\"card-cvc\").removeAttribute(\"name\");\n      document.getElementById(\"charge-form\").submit();\n    });\n  });\n};\n\nwindow.addEventListener(\"load\", card);","map":{"version":3,"sources":["/Users/kusakashiori/projects/furima-31092/app/javascript/card.js"],"names":["card","Payjp","setPublicKey","process","env","PAYJP_PUBLIC_KEY","form","document","getElementById","addEventListener","e","preventDefault","formResult","formData","FormData","number","get","exp_month","exp_year","cvc","createToken","status","response","token","id","renderDom","tokenObj","insertAdjacentHTML","removeAttribute","submit","window"],"mappings":"AAAA,IAAMA,IAAI,GAAG,SAAPA,IAAO,GAAM;AACjBC,EAAAA,KAAK,CAACC,YAAN,CAAmBC,OAAO,CAACC,GAAR,CAAYC,gBAA/B;AACA,MAAMC,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAb;AACAF,EAAAA,IAAI,CAACG,gBAAL,CAAsB,QAAtB,EAAgC,UAACC,CAAD,EAAO;AACrCA,IAAAA,CAAC,CAACC,cAAF;AAEA,QAAMC,UAAU,GAAGL,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAnB;AACA,QAAMK,QAAQ,GAAG,IAAIC,QAAJ,CAAaF,UAAb,CAAjB;AAEA,QAAMZ,IAAI,GAAG;AACXe,MAAAA,MAAM,EAAEF,QAAQ,CAACG,GAAT,CAAa,uBAAb,CADG;AAEXC,MAAAA,SAAS,EAAEJ,QAAQ,CAACG,GAAT,CAAa,0BAAb,CAFA;AAGXE,MAAAA,QAAQ,cAAOL,QAAQ,CAACG,GAAT,CAAa,yBAAb,CAAP,CAHG;AAIXG,MAAAA,GAAG,EAAEN,QAAQ,CAACG,GAAT,CAAa,oBAAb;AAJM,KAAb;AAMAf,IAAAA,KAAK,CAACmB,WAAN,CAAkBpB,IAAlB,EAAwB,UAACqB,MAAD,EAASC,QAAT,EAAsB;AAC5C,UAAID,MAAM,IAAI,GAAd,EAAmB;AACjB,YAAME,KAAK,GAAGD,QAAQ,CAACE,EAAvB;AACA,YAAMC,SAAS,GAAGlB,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAlB;AACA,YAAMkB,QAAQ,0BAAmBH,KAAnB,oCAAd;AACAE,QAAAA,SAAS,CAACE,kBAAV,CAA6B,WAA7B,EAA0CD,QAA1C;AACD;;AAEDnB,MAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCoB,eAAvC,CAAuD,MAAvD;AACArB,MAAAA,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CoB,eAA1C,CAA0D,MAA1D;AACArB,MAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCoB,eAAzC,CAAyD,MAAzD;AACArB,MAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCoB,eAApC,CAAoD,MAApD;AAEArB,MAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCqB,MAAvC;AACD,KAdD;AAeD,GA3BD;AA4BD,CA/BD;;AAiCAC,MAAM,CAACrB,gBAAP,CAAwB,MAAxB,EAAgCT,IAAhC","sourcesContent":["const card = () => {\n  Payjp.setPublicKey(process.env.PAYJP_PUBLIC_KEY);\n  const form = document.getElementById(\"charge-form\");\n  form.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n\n    const formResult = document.getElementById(\"charge-form\");\n    const formData = new FormData(formResult);\n\n    const card = {\n      number: formData.get(\"order_address[number]\"),\n      exp_month: formData.get(\"order_address[exp_month]\"),\n      exp_year: `20${formData.get(\"order_address[exp_year]\")}`,\n      cvc: formData.get(\"order_address[cvc]\"),\n    };\n    Payjp.createToken(card, (status, response) => {\n      if (status == 200) {\n        const token = response.id;\n        const renderDom = document.getElementById(\"charge-form\");\n        const tokenObj = `<input value=${token} name='token' type=\"hidden\"> `;\n        renderDom.insertAdjacentHTML(\"beforeend\", tokenObj);\n      }\n\n      document.getElementById(\"card-number\").removeAttribute(\"name\");\n      document.getElementById(\"card-exp-month\").removeAttribute(\"name\");\n      document.getElementById(\"card-exp-year\").removeAttribute(\"name\");\n      document.getElementById(\"card-cvc\").removeAttribute(\"name\");\n\n      document.getElementById(\"charge-form\").submit();\n    });\n  });\n};\n\nwindow.addEventListener(\"load\", card);"]},"metadata":{},"sourceType":"module"}