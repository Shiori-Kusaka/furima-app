{"ast":null,"code":"var card = function card() {\n  Payjp.setPublicKey(process.env.PAYJP_PUBLIC_KEY);\n  var form = document.getElementById(\"charge-form\");\n  form.addEventListener(\"submit\", function (e) {\n    e.preventDefault();\n    var formResult = document.getElementById(\"charge-form\");\n    var formData = new FormData(formResult);\n    var card = {\n      number: formData.get(\"order_address[number]\"),\n      exp_month: formData.get(\"order_address[exp_month]\"),\n      exp_year: \"20\".concat(formData.get(\"order_address[exp_year]\")),\n      cvc: formData.get(\"order_address[cvc]\")\n    };\n    Payjp.createToken(card, function (status, response) {\n      if (status == 200) {\n        var token = response.id;\n        var renderDom = document.getElementById(\"charge-form\");\n        var tokenObj = \"<input value=\".concat(token, \" name='token' type=\\\"hidden\\\"> \");\n        renderDom.insertAdjacentHTML(\"beforeend\", tokenObj);\n      }\n      document.getElementById(\"card-number\").removeAttribute(\"name\");\n      document.getElementById(\"card-exp-month\").removeAttribute(\"name\");\n      document.getElementById(\"card-exp-year\").removeAttribute(\"name\");\n      document.getElementById(\"card-cvc\").removeAttribute(\"name\");\n      document.getElementById(\"charge-form\").submit();\n    });\n  });\n};\nwindow.addEventListener(\"load\", card);","map":{"version":3,"names":["card","Payjp","setPublicKey","process","env","PAYJP_PUBLIC_KEY","form","document","getElementById","addEventListener","e","preventDefault","formResult","formData","FormData","number","get","exp_month","exp_year","cvc","createToken","status","response","token","id","renderDom","tokenObj","insertAdjacentHTML","removeAttribute","submit","window"],"sources":["/Users/kusakashiori/furima-31092/app/javascript/card.js"],"sourcesContent":["const card = () => {\n  Payjp.setPublicKey(process.env.PAYJP_PUBLIC_KEY);\n  const form = document.getElementById(\"charge-form\");\n  form.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n\n    const formResult = document.getElementById(\"charge-form\");\n    const formData = new FormData(formResult);\n\n    const card = {\n      number: formData.get(\"order_address[number]\"),\n      exp_month: formData.get(\"order_address[exp_month]\"),\n      exp_year: `20${formData.get(\"order_address[exp_year]\")}`,\n      cvc: formData.get(\"order_address[cvc]\"),\n    };\n    Payjp.createToken(card, (status, response) => {\n      if (status == 200) {\n        const token = response.id;\n        const renderDom = document.getElementById(\"charge-form\");\n        const tokenObj = `<input value=${token} name='token' type=\"hidden\"> `;\n        renderDom.insertAdjacentHTML(\"beforeend\", tokenObj);\n      }\n\n      document.getElementById(\"card-number\").removeAttribute(\"name\");\n      document.getElementById(\"card-exp-month\").removeAttribute(\"name\");\n      document.getElementById(\"card-exp-year\").removeAttribute(\"name\");\n      document.getElementById(\"card-cvc\").removeAttribute(\"name\");\n\n      document.getElementById(\"charge-form\").submit();\n    });\n  });\n};\n\nwindow.addEventListener(\"load\", card);"],"mappings":"AAAA,IAAMA,IAAI,GAAG,SAAPA,IAAI,GAAS;EACjBC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,gBAAgB,CAAC;EAChD,IAAMC,IAAI,GAAGC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;EACnDF,IAAI,CAACG,gBAAgB,CAAC,QAAQ,EAAE,UAACC,CAAC,EAAK;IACrCA,CAAC,CAACC,cAAc,EAAE;IAElB,IAAMC,UAAU,GAAGL,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;IACzD,IAAMK,QAAQ,GAAG,IAAIC,QAAQ,CAACF,UAAU,CAAC;IAEzC,IAAMZ,IAAI,GAAG;MACXe,MAAM,EAAEF,QAAQ,CAACG,GAAG,CAAC,uBAAuB,CAAC;MAC7CC,SAAS,EAAEJ,QAAQ,CAACG,GAAG,CAAC,0BAA0B,CAAC;MACnDE,QAAQ,cAAOL,QAAQ,CAACG,GAAG,CAAC,yBAAyB,CAAC,CAAE;MACxDG,GAAG,EAAEN,QAAQ,CAACG,GAAG,CAAC,oBAAoB;IACxC,CAAC;IACDf,KAAK,CAACmB,WAAW,CAACpB,IAAI,EAAE,UAACqB,MAAM,EAAEC,QAAQ,EAAK;MAC5C,IAAID,MAAM,IAAI,GAAG,EAAE;QACjB,IAAME,KAAK,GAAGD,QAAQ,CAACE,EAAE;QACzB,IAAMC,SAAS,GAAGlB,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;QACxD,IAAMkB,QAAQ,0BAAmBH,KAAK,oCAA+B;QACrEE,SAAS,CAACE,kBAAkB,CAAC,WAAW,EAAED,QAAQ,CAAC;MACrD;MAEAnB,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAACoB,eAAe,CAAC,MAAM,CAAC;MAC9DrB,QAAQ,CAACC,cAAc,CAAC,gBAAgB,CAAC,CAACoB,eAAe,CAAC,MAAM,CAAC;MACjErB,QAAQ,CAACC,cAAc,CAAC,eAAe,CAAC,CAACoB,eAAe,CAAC,MAAM,CAAC;MAChErB,QAAQ,CAACC,cAAc,CAAC,UAAU,CAAC,CAACoB,eAAe,CAAC,MAAM,CAAC;MAE3DrB,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC,CAACqB,MAAM,EAAE;IACjD,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AAEDC,MAAM,CAACrB,gBAAgB,CAAC,MAAM,EAAET,IAAI,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}